<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gelişmiş ChatBot (Geliştirilmiş)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app" id="app" data-theme="light">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">AI</div>
        <div>
          <h1>Gelişmiş Chat</h1>
          <p>Geliştirilmiş sohbet arayüzü</p>
        </div>
      </div>

      <div class="controls">
        <button id="new-conv">Yeni Konuşma</button>
        <button id="export-conv" class="small-btn">Dışa Aktar</button>
        <button id="toggle-theme" class="small-btn">Karanlık Mod</button>
        <button id="clear-storage" class="small-btn">Temizle (Tüm Geçmiş)</button>
      </div>

      <div class="settings" aria-label="Ayarlar">
        <label>API URL (veya boş bırak default kullanılacak)</label>
        <input id="api-url" type="text" placeholder="https://backend.../llm-api?pk=..." />
        
        <label>API Key (isteğe bağlı, URL'de gömülü ise boş bırak)</label>
        <input id="api-key" type="password" placeholder="İstersen buraya koy" />
        
        <label>Sistem Prompt (asıl model yönlendirmesi)</label>
        <textarea id="system-prompt" rows="3">Sen yardımcı, kısa ve nazik bir asistan olarak davran.</textarea>

        <label>Model Sıcaklığı (Temperature, 0.0 - 1.0)</label>
        <input id="temperature-input" type="number" step="0.1" min="0" max="1" placeholder="0.7" /> 
        
        <label>Maksimum Token (Max Tokens)</label>
        <input id="max-tokens-input" type="number" min="1" placeholder="2048" />
        <div class="row">
          <div class="meta">Max mesaj saklama: <span id="msg-limit-label">200</span></div>
          <div style="flex:1"></div>
        </div>
        <div class="meta">Not: API'ye direkt anahtar koymak güvenlik riski yaratır. Üretimde sunucu tarafı proxy tercih et.</div>
      </div>

      <div style="flex:1;overflow:auto" class="conversations" id="conversations"></div>

      <div class="sidebar-footer">
        <h2>Geçmiş Sohbetler</h2>
        <div>— Hızlı notlar</div>
        <div>Enter: Gönder • Shift+Enter: Yeni satır</div>
        <div>Otomatik yeniden deneme (3 deneme) ve yerel kayıt var.</div>
      </div>
    </aside>

    <main class="panel" role="main">
      <header>
        <h2 id="conv-title">Yeni Konuşma</h2>
        <button id="edit-title-btn" class="muted-btn small-btn" title="Başlığı Düzenle">✏️</button>
        <div class="actions">
          <div class="muted small" id="status-info">Hazır</div>
          <div class="error-alert" id="error-alert" role="alert"></div>
        </div>
      </header>

      <div class="chat-window" id="chat-window" aria-live="polite"></div>

      <div class="input-area" role="region" aria-label="Mesaj gönderme">
        <div class="avatar" title="Sen">Z</div>
        <textarea id="user-input" placeholder="Mesajınızı yazın... (Enter = gönder, Shift+Enter = yeni satır)"></textarea>
        <button class="send-btn" id="send-btn">Gönder</button>
      </div>
    </main>
  </div>

  <script src="script.js"></script>
</body>
</html>
